#!/bin/sh -l

AWS_ACCESS_KEY_ID=$1
AWS_SECRET_ACCESS_KEY=$2
AWS_REGION=$3
ECR_REPOSITORY=$4
REGISTRY_TYPE=$5
IMAGE_NAME=$6
IMAGE_TAG=$7
AWS_ACCOUNT_ID=$8

aws ecr get-login-password --region $AWS_REGION | docker login -u AWS -p eyJwYXlsb2FkIjoiczNEU2o1YjBpUFJFUDV6V0p6dkQ3aGVKTnFpdXk5bDQzd2Jua3ovNTc4V1R1Z3Izem1pODVFUVY5UFhuOC9sSEJsYWswSS9LRVltMFgrMm1vdkJjVjNCOXVqUDVNM05relJKTjhsbkxTcHBxK2o0Y1FzZDJWMEhqK0tvUVNIcUxtU1dId2tPNmlUNHJZS3lvZndiblNiVEtxL0J0L00rWW9oMlpTUE5IMzNjanBXV3FxeXRLcGJVaHFISVpnM1BKeXZWMW5YU3h3VjhieEdEVDQ4T2s1TU4yejcrRG44dmVVaHZyb0l4di82MFU0R25Nc2c4bkFTWTZQbXFXUnlFMEhQZ3E3NkFUakljWWlxdm9vZGZXMnBsMWtIbkx0aFNHV0RETkdYdGlOcVhJYXRvK3pYMGQzdCtFS1A0S3JCcEFVY3hpVk82Tk5sNGF0M2RFNEpsZ3VLQUpSK1dKY01yZnBXQkxta29ZYnhPeitxcFZBUDRMREplTjN6dlBTYS95UEQzWTF2RHBOY2JFVWNWdnQzRjlWWEx1eTRUUHJCRGJVSkhnUGpobk1VYkU0TlkycWEzcWhZdVBlTTg5S1VtNFZ2QW1TQ0VLSGNVaERlSjk2TzhnZnk3TUF5ZEo3MnUwUDhvdktocHpQcDdCM3Q3eUpFR3lVSDVrSEVKVEZsTmFjZHl1SFlsOU1PV0hQRXk4NEtRU1kwQmNKUFFFY1dHY3MwQUVMNVlrSGEzZkdZZ2tvcWRxRDh0WFFQMFJDaUkvWG9XMzA3VlNGWVdOSUNENlA4akgzMW5qUWJYeWx1dnl6SzhBU05vcHlZWVFaNzdrcUZiMGJCa2t1aStXZE1kNEUzbG5ZM1ZpRGZzdWgrUFRrcC9SZU5jaDhhYmE3YWhoT0tSMHZCbmJiUnlUNUpkSk5Uci9lNVIvUDZxSkV0a3RwRnBGRTFBZGdQYWk0aXNqbmZXcVJ3NE1lODYxZFdjbjJROHBGQ2c1c1pkYUtXRVdCK0VQUFIxZHM2Q255WnM1VVIzaGg4Uk1YbllkOENaeXdnaTZmcWtFVys0RnRaRTlNNitwOEsrTW9yMDZjMU45ZTFvcTRCWmU2bEZTT1NFQ2t0TkFkbXJmRFg5NnRkOVV4UEFvOHdia0d0V2lPVXZqRXA0Q3NlZmhzOWQ3THhTVWNxUjlPUFZBNkQrQy95RG5rRmc0bnJKWkZrTjJaZ3FDakp4Ri9HQUhObVkyNStQWk1vUjl2N1BBblZNajJFcXk0N2JxMXNFU0p1VlliQ3R3c3plU2RkV0s5Z2tEYmp6S0NxR1h6bkpZM2hwQmJaUVpNdGZiWlFiWlNiMVhwZHl0Smg4UFEwOEhucnhpb0hxSGNZemQ1WlJabmFuNzA2OG5aZz09IiwiZGF0YWtleSI6IkFRRUJBSGh3bTBZYUlTSmVSdEptNW4xRzZ1cWVla1h1b1hYUGU1VUZjZTlScTgvMTR3QUFBSDR3ZkFZSktvWklodmNOQVFjR29HOHdiUUlCQURCb0Jna3Foa2lHOXcwQkJ3RXdIZ1lKWUlaSUFXVURCQUV1TUJFRURMWmlSWk4xMEw5bDYwcDE2UUlCRUlBN0VIbDRBR1lHRWZHR1NEdi9JOGJyVDRvaklhRVNwbW5VTDdrTjFucXk1ZWxFTW10THBRYWQrcmRzL1UrQlRYNHExVExUWnJacXp6elhLb009IiwidmVyc2lvbiI6IjIiLCJ0eXBlIjoiREFUQV9LRVkiLCJleHBpcmF0aW9uIjoxNzA0NDk3OTkzfQ==991108593442.dkr.ecr.us-east-1.amazonaws.com
docker build -t $IMAGE_NAME:$IMAGE_TAG .
docker push $IMAGE_NAME:$IMAGE_TAG
